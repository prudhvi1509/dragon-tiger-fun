<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dragon Tiger ‚Äì Fun Play</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: radial-gradient(circle, #145a32, #0b2f1a);
  color: #fff;
  font-family: Arial, sans-serif;
  text-align: center;
}

h1 { margin: 10px 0; }

#balance {
  font-size: 18px;
  margin: 5px;
}

button {
  padding: 10px 16px;
  margin: 5px;
  font-size: 16px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
}

button:active { transform: scale(0.96); }

#dealer {
  font-size: 40px;
  margin: 10px;
  animation: dealerMove 1.5s infinite alternate;
}

@keyframes dealerMove {
  from { transform: translateX(-6px); }
  to { transform: translateX(6px); }
}

.table {
  display: flex;
  justify-content: space-around;
  margin-top: 15px;
}

.card {
  width: 90px;
  height: 130px;
  border-radius: 10px;
  background-size: cover;
  background-position: center;
  animation: deal 0.5s ease;
}

@keyframes deal {
  from { transform: translateY(-40px) rotateY(90deg); opacity: 0; }
  to { transform: translateY(0) rotateY(0); opacity: 1; }
}

.win {
  box-shadow: 0 0 20px gold;
}

.chips button {
  background: gold;
  color: #000;
  font-weight: bold;
}

.controls button {
  background: #1abc9c;
  color: #000;
}

#result {
  font-size: 20px;
  margin-top: 10px;
}

#history {
  margin-top: 10px;
  font-size: 14px;
  max-height: 130px;
  overflow-y: auto;
  border-top: 1px solid #555;
}
</style>
</head>

<body>

<h1>üêâ Dragon Tiger üêÖ</h1>

<div id="balance">Balance: ‚Çπ10000</div>
<button onclick="enableSound()">üîä Enable Sound</button>

<div id="dealer">üë©‚Äçüíº Dealer</div>

<div class="table">
  <div>
    <h3>Dragon</h3>
    <div id="dragon" class="card"></div>
  </div>
  <div>
    <h3>Tiger</h3>
    <div id="tiger" class="card"></div>
  </div>
</div>

<div class="chips">
  <button onclick="setBet(100)">‚Çπ100</button>
  <button onclick="setBet(500)">‚Çπ500</button>
  <button onclick="setBet(1000)">‚Çπ1000</button>
</div>

<p>Bet: ‚Çπ<span id="bet">100</span></p>

<div class="controls">
  <button onclick="play('dragon')">Dragon</button>
  <button onclick="play('tiger')">Tiger</button>
  <button onclick="play('tie')">Tie (8x)</button>
</div>

<div id="result"></div>
<div id="history"></div>

<script>
/* ---------- SOUND ---------- */
let audioUnlocked = false;
function enableSound() {
  const ctx = new (window.AudioContext || window.webkitAudioContext)();
  ctx.resume();
  audioUnlocked = true;
  alert("Sound enabled");
}

function playSound(type) {
  if (!audioUnlocked) return;
  let src = "";
  if (type === "deal") src = "https://assets.mixkit.co/sfx/preview/mixkit-fast-card-swipe-2331.mp3";
  if (type === "win") src = "https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3";
  if (type === "lose") src = "https://assets.mixkit.co/sfx/preview/mixkit-arcade-retro-game-over-213.mp3";
  new Audio(src).play();
}

/* ---------- GAME LOGIC ---------- */
let balance = 10000;
let bet = 100;
let deck = [];

const suits = ["S","H","D","C"];
const values = ["A","2","3","4","5","6","7","8","9","10","J","Q","K"];

function createDeck() {
  deck = [];
  for (let s of suits) {
    for (let v of values) {
      deck.push({ code: v + s, val: values.indexOf(v) + 1 });
    }
  }
  deck.sort(() => Math.random() - 0.5);
}
createDeck();

function drawCard() {
  if (deck.length < 2) createDeck();
  return deck.pop();
}

function setBet(b) {
  bet = b;
  document.getElementById("bet").textContent = bet;
}

function updateBalance() {
  document.getElementById("balance").textContent = "Balance: ‚Çπ" + balance;
}

function addHistory(t) {
  const h = document.getElementById("history");
  h.innerHTML = t + "<br>" + h.innerHTML;
}

function cardImage(code) {
  return `https://deckofcardsapi.com/static/img/${code}.png`;
}

function play(choice) {
  if (balance < bet) {
    document.getElementById("result").textContent = "Not enough balance";
    return;
  }

  balance -= bet;
  updateBalance();
  playSound("deal");

  const d = drawCard();
  const t = drawCard();

  const dEl = document.getElementById("dragon");
  const tEl = document.getElementById("tiger");

  dEl.className = "card";
  tEl.className = "card";

  dEl.style.backgroundImage = "";
  tEl.style.backgroundImage = "";

  setTimeout(() => {
    dEl.style.backgroundImage = `url(${cardImage(d.code)})`;
    tEl.style.backgroundImage = `url(${cardImage(t.code)})`;

    let result = d.val === t.val ? "tie" : d.val > t.val ? "dragon" : "tiger";

    if (result === choice) {
      let win = choice === "tie" ? bet * 8 : bet * 2;
      balance += win;
      updateBalance();
      document.getElementById("result").textContent = "YOU WIN ‚Çπ" + win;
      playSound("win");
      (result === "dragon" ? dEl : tEl).classList.add("win");
    } else {
      document.getElementById("result").textContent = "YOU LOSE";
      playSound("lose");
    }

    addHistory(`D:${d.code} T:${t.code} ‚Üí ${result.toUpperCase()}`);
  }, 500);
}
</script>

</body>
</html>
